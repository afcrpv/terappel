.row
  = f.input :code, wrapper_html: {class: "span2"}, input_html: {class: "span2"}
  = f.input :date_appel, as: :string, wrapper_html: {class: "span2"}, input_html: {autofocus: true, "data-value" => date_appel, class: "dateITA dateNotFuture span2"}
  = f.association :motif, wrapper_html: {class: "span6"}, input_html: {class: "span6 combobox"}
  = f.input :expo_terato, as: :select, collection: Dossier::ONI, wrapper_html: {class: "span1"}, input_html: {class: "span1"}

= f.input :correspondant_nom, wrapper: :append, wrapper_html: {id: "dossier_correspondant_id_field"} do
  = f.input :correspondant_id, as: :hidden
  = f.input_field :correspondant_nom, class: "span6", id_element: "#dossier_correspondant_id", "data-autocomplete" => autocomplete_correspondant_fullname_dossiers_path
  - if can?(:create, Correspondant)
    = button_tag "#", data: {link: new_correspondant_path(modal: true)}, class: "btn create" do
      %i.icon-plus
      Ajout
  - if can?(:update, Correspondant)
    = button_tag "#", data: {link: edit_correspondant_path(modal: true, id: "__ID__")}, class: "btn update" do
      %i.icon-pencil
      Voir/modifier

.row
  = f.input :name, wrapper_html: {class: "span2"}, input_html: {class: "span2"}
  = f.input :prenom, wrapper_html: {class: "span2"}, input_html: {class: "span2"}
  = f.input :date_naissance, as: :string, wrapper_html: {class: "span2"}, input_html: {class: "dateITA dateNotFuture span2", "data-value" => date_naissance}
  = f.input :age, wrapper_html: {class: "span1"}, input_html: {class: "span1"}

.row
  = f.input :poids, wrapper_html: {class: "span2"}, wrapper: :append do
    = f.input_field :poids, class: "span1"
    %span.add-on kg
  = f.input :taille, wrapper_html: {class: "span2"}, wrapper: :append do
    = f.input_field :taille, class: "span1"
    %span.add-on cm
  = f.input :imc,  wrapper_html: {class: "span2"}, wrapper: :append do
    = f.input_field :imc, disabled: true, class: "span1"
    %span.add-on
      kg/m
      %sup> 2

= f.association :categoriesp, input_html: {class: "span6"}

.row
  - %w(perso fam).each do |field|
    .span6
      .control-group
        = f.label "antecedents_#{field}"
        .controls.controls-row
          = f.collection_select "antecedents_#{field}", Dossier::ONI, :last, :first, {}, include_blank: true, class: "span1"
          = f.text_area "comm_antecedents_#{field}", style: "display: none;", class: "span4", rows: "1"

%table#grossesses_anterieures
  %tbody
    %tr
      %th{colspan: "5"}= t(:grsant, scope: "activerecord.attributes.dossier")
      %td= f.text_field :grsant, class: "span1"
    %tr
      - [:fcs, :geu, :miu].each do |item|
        %th= item.to_s.upcase
        %td= f.text_field item, class: "span1"
    %tr
      - [:ivg, :img, :nai].each do |item|
        %th= item.to_s.upcase
        %td= f.text_field item, class: "span1"
